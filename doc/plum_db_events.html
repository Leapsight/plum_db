<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.26.0">
    <meta name="project" content="plum_db v0.3.10">

    <title>plum_db_events â€” plum_db v0.3.10</title>
    <link rel="stylesheet" href="dist/erlang-e2fc4c0a4f7951ab3ca5.css" />

    <script src="dist/sidebar_items-f6fa2d8b97.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-68b26e75fcd91b8a764c.js"></script>


  </head>
  <body data-type="modules">
    <script>

      try {
        if (localStorage.getItem('night-mode') === 'true') {
          document.body.classList.add('night-mode');
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle">
  <span class="icon-menu" title="Collapse/expand sidebar"></span>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <span class="icon-search" aria-hidden="true" title="Submit search"></span>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <span class="icon-cross" aria-hidden="true" title="Cancel search"></span>
    </button>
    <label class="search-label">
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">
    <div class="sidebar-projectDetails">
      <a href="plum_db.html" class="sidebar-projectName" translate="no">
plum_db
      </a>
      <strong class="sidebar-projectVersion" translate="no">
        v0.3.10
      </strong>
    </div>

  </div>

  <ul class="sidebar-listNav">
    <li><a id="extras-list-link" href="#full-list">Pages</a></li>

      <li><a id="modules-list-link" href="#full-list">Modules</a></li>


  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
  <span translate="no">plum_db_events</span> 
  <small class="app-vsn" translate="no">(plum_db v0.3.10)</small>

    <a href="https://gitlab.com/leapsight/plum_db/blob/v0.3.10/src/plum_db_events.erl#L19" title="View Source" class="view-source" rel="help">
      <span class="icon-code" aria-hidden="true"></span>
      <span class="sr-only">View Source</span>
    </a>


</h1>



  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <span class="icon-link" aria-hidden="true"></span>
        <span class="sr-only">Link to this section</span>
      </a>
      Summary
    </h1>

  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#add_callback/1" translate="no">add_callback(Fn)</a>

        </div>

          <div class="summary-synopsis">Adds a callback function. The function needs to have a single argument representing the event that has been fired.</div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#add_handler/2" translate="no">add_handler(Handler, Args)</a>

        </div>

          <div class="summary-synopsis">Adds an event handler. Calls <code>gen_event:add_handler(?MODULE, Handler, Args)</code>.</div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#add_sup_callback/1" translate="no">add_sup_callback(Fn)</a>

        </div>

          <div class="summary-synopsis">Adds a supervised callback function. The function needs to have a single argument representing the event that has been fired.</div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#add_sup_handler/2" translate="no">add_sup_handler(Handler, Args)</a>

        </div>

          <div class="summary-synopsis">Adds a supervised event handler. Calls <code>gen_event:add_sup_handler(?MODULE, Handler, Args)</code>.</div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#code_change/3" translate="no">code_change(OldVsn, State, Extra)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete_handler/1" translate="no">delete_handler(Handler)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#delete_handler/2" translate="no">delete_handler(Ref, Args)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#handle_call/2" translate="no">handle_call(Request, State)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#handle_event/2" translate="no">handle_event(_, State)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#handle_info/2" translate="no">handle_info(Info, State)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#init/1" translate="no">init(_)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#notify/2" translate="no">notify(Event, Message)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#start_link/0" translate="no">start_link()</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#subscribe/1" translate="no">subscribe(EventType)</a>

        </div>

          <div class="summary-synopsis">Subscribe to events of type Event. Any events published through update/1 will delivered to the calling process, along with all other subscribers. This function will raise an exception if you try to subscribe to the same event twice from the same process. This function uses plum_db_pubsub:subscribe/2.</div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#subscribe/2" translate="no">subscribe(EventType, MatchSpec)</a>

        </div>

          <div class="summary-synopsis">Subscribe conditionally to events of type Event. This function is similar to subscribe/2, but adds a condition in the form of an ets match specification. The condition is tested and a message is delivered only if the condition is true. Specifically, the test is: <code>ets:match_spec_run([Msg], ets:match_spec_compile(Cond)) == [true]</code> In other words, if the match_spec returns true for a message, that message is sent to the subscriber. For any other result from the match_spec, the message is not sent. <code>Cond == undefined</code> means that all messages will be delivered, which means that <code>Cond=undefined</code> and <code>Cond=[{</code>_',[],[true]}]' are equivalent. This function will raise an exception if you try to subscribe to the same event twice from the same process. This function uses <code>plum_db_pubsub:subscribe_cond/2</code>.</div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#terminate/2" translate="no">terminate(Reason, State)</a>

        </div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#unsubscribe/1" translate="no">unsubscribe(EventType)</a>

        </div>

          <div class="summary-synopsis">Remove subscription created using <code>subscribe/1,2</code></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#update/1" translate="no">update(PObject)</a>

        </div>

          <div class="summary-synopsis">Notify the event handlers, callback funs and subscribers of an updated object. The message delivered to each subscriber will be of the form: <code>{plum_db_event, Event, Msg}</code></div>

      </div>

  </div>

  </section>


  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <span class="icon-link" aria-hidden="true"></span>
        <span class="sr-only">Link to this section</span>
      </a>
Functions
    </h1>
    <div class="functions-list">
<section class="detail" id="add_callback/1">

  <div class="detail-header">
    <a href="#add_callback/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">add_callback(Fn)</h1>

      <a href="https://gitlab.com/leapsight/plum_db/blob/v0.3.10/src/plum_db_events.erl#L93" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">add_callback(fun((any()) -> any())) -> {ok, reference()}.</pre>

      </div>

Adds a callback function. The function needs to have a single argument representing the event that has been fired.
  </section>
</section>
<section class="detail" id="add_handler/2">

  <div class="detail-header">
    <a href="#add_handler/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">add_handler(Handler, Args)</h1>

      <a href="https://gitlab.com/leapsight/plum_db/blob/v0.3.10/src/plum_db_events.erl#L72" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

Adds an event handler. Calls <code>gen_event:add_handler(?MODULE, Handler, Args)</code>.
  </section>
</section>
<section class="detail" id="add_sup_callback/1">

  <div class="detail-header">
    <a href="#add_sup_callback/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">add_sup_callback(Fn)</h1>

      <a href="https://gitlab.com/leapsight/plum_db/blob/v0.3.10/src/plum_db_events.erl#L107" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">add_sup_callback(fun((any()) -> any())) -> {ok, reference()}.</pre>

      </div>

Adds a supervised callback function. The function needs to have a single argument representing the event that has been fired.
  </section>
</section>
<section class="detail" id="add_sup_handler/2">

  <div class="detail-header">
    <a href="#add_sup_handler/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">add_sup_handler(Handler, Args)</h1>

      <a href="https://gitlab.com/leapsight/plum_db/blob/v0.3.10/src/plum_db_events.erl#L81" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

Adds a supervised event handler. Calls <code>gen_event:add_sup_handler(?MODULE, Handler, Args)</code>.
  </section>
</section>
<section class="detail" id="code_change/3">

  <div class="detail-header">
    <a href="#code_change/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">code_change(OldVsn, State, Extra)</h1>

      <a href="https://gitlab.com/leapsight/plum_db/blob/v0.3.10/src/plum_db_events.erl#L243" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="delete_handler/1">

  <div class="detail-header">
    <a href="#delete_handler/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete_handler(Handler)</h1>

      <a href="https://gitlab.com/leapsight/plum_db/blob/v0.3.10/src/plum_db_events.erl#L120" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">delete_handler(module() | reference()) ->
                  term() | {error, module_not_found} | {'EXIT', Reason :: term()}.</pre>

      </div>


  </section>
</section>
<section class="detail" id="delete_handler/2">

  <div class="detail-header">
    <a href="#delete_handler/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">delete_handler(Ref, Args)</h1>

      <a href="https://gitlab.com/leapsight/plum_db/blob/v0.3.10/src/plum_db_events.erl#L131" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">delete_handler(module() | reference(), Args :: term()) ->
                  term() | {error, module_not_found} | {'EXIT', Reason :: term()}.</pre>

      </div>


  </section>
</section>
<section class="detail" id="handle_call/2">

  <div class="detail-header">
    <a href="#handle_call/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">handle_call(Request, State)</h1>

      <a href="https://gitlab.com/leapsight/plum_db/blob/v0.3.10/src/plum_db_events.erl#L232" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="handle_event/2">

  <div class="detail-header">
    <a href="#handle_event/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">handle_event(_, State)</h1>

      <a href="https://gitlab.com/leapsight/plum_db/blob/v0.3.10/src/plum_db_events.erl#L220" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="handle_info/2">

  <div class="detail-header">
    <a href="#handle_info/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">handle_info(Info, State)</h1>

      <a href="https://gitlab.com/leapsight/plum_db/blob/v0.3.10/src/plum_db_events.erl#L236" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="init/1">

  <div class="detail-header">
    <a href="#init/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">init(_)</h1>

      <a href="https://gitlab.com/leapsight/plum_db/blob/v0.3.10/src/plum_db_events.erl#L213" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="notify/2">

  <div class="detail-header">
    <a href="#notify/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">notify(Event, Message)</h1>

      <a href="https://gitlab.com/leapsight/plum_db/blob/v0.3.10/src/plum_db_events.erl#L201" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="start_link/0">

  <div class="detail-header">
    <a href="#start_link/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">start_link()</h1>

      <a href="https://gitlab.com/leapsight/plum_db/blob/v0.3.10/src/plum_db_events.erl#L55" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="subscribe/1">

  <div class="detail-header">
    <a href="#subscribe/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">subscribe(EventType)</h1>

      <a href="https://gitlab.com/leapsight/plum_db/blob/v0.3.10/src/plum_db_events.erl#L149" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre translate="no">subscribe(term()) -> ok.</pre>

      </div>

Subscribe to events of type Event. Any events published through update/1 will delivered to the calling process, along with all other subscribers. This function will raise an exception if you try to subscribe to the same event twice from the same process. This function uses plum_db_pubsub:subscribe/2.
  </section>
</section>
<section class="detail" id="subscribe/2">

  <div class="detail-header">
    <a href="#subscribe/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">subscribe(EventType, MatchSpec)</h1>

      <a href="https://gitlab.com/leapsight/plum_db/blob/v0.3.10/src/plum_db_events.erl#L171" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

Subscribe conditionally to events of type Event. This function is similar to subscribe/2, but adds a condition in the form of an ets match specification. The condition is tested and a message is delivered only if the condition is true. Specifically, the test is: <code>ets:match_spec_run([Msg], ets:match_spec_compile(Cond)) == [true]</code> In other words, if the match_spec returns true for a message, that message is sent to the subscriber. For any other result from the match_spec, the message is not sent. <code>Cond == undefined</code> means that all messages will be delivered, which means that <code>Cond=undefined</code> and <code>Cond=[{</code>_',[],[true]}]' are equivalent. This function will raise an exception if you try to subscribe to the same event twice from the same process. This function uses <code>plum_db_pubsub:subscribe_cond/2</code>.
  </section>
</section>
<section class="detail" id="terminate/2">

  <div class="detail-header">
    <a href="#terminate/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">terminate(Reason, State)</h1>

      <a href="https://gitlab.com/leapsight/plum_db/blob/v0.3.10/src/plum_db_events.erl#L240" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="unsubscribe/1">

  <div class="detail-header">
    <a href="#unsubscribe/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">unsubscribe(EventType)</h1>

      <a href="https://gitlab.com/leapsight/plum_db/blob/v0.3.10/src/plum_db_events.erl#L180" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

Remove subscription created using <code>subscribe/1,2</code>
  </section>
</section>
<section class="detail" id="update/1">

  <div class="detail-header">
    <a href="#update/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">update(PObject)</h1>

      <a href="https://gitlab.com/leapsight/plum_db/blob/v0.3.10/src/plum_db_events.erl#L193" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

Notify the event handlers, callback funs and subscribers of an updated object. The message delivered to each subscriber will be of the form: <code>{plum_db_event, Event, Msg}</code>
  </section>
</section>

    </div>
  </section>

      <footer class="footer">

        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.26.0) for the
            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>.
          </span>
          <span class="line">
            Designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" rel="noopener" title="@dignifiedquire" translate="no">Friedel Ziegelmayer</a>.
          </span>
        </p>
        <p>

            <a href="api-reference.html" title="API reference" class="line footer-button">API Reference</a>

          <button class="line footer-button display-shortcuts-help">
            Display keyboard shortcuts
          </button>
          <button class="line footer-button display-quick-switch">
            Go to a HexDocs package
          </button>
          <button class="line footer-button display-settings">
            Settings
          </button>
        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
